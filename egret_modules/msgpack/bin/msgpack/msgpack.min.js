this.msgpack||function(e){function t(e,t){k=0;var r=n([],e,0);return k?!1:t?a(r):r}function r(e){return b="string"==typeof e?p(e):e,v=-1,s()}function n(e,t,r){var s,a,o,u,c,p,i,h,f,l;if(null==t)e.push(192);else if(t===!1)e.push(194);else if(t===!0)e.push(195);else switch(typeof t){case"number":t!==t?e.push(203,255,255,255,255,255,255,255,255):t===1/0?e.push(203,127,240,0,0,0,0,0,0):Math.floor(t)===t?0>t?t>=-32?e.push(224+t+32):t>-128?e.push(208,t+256):t>-32768?(t+=65536,e.push(209,t>>8,255&t)):t>-2147483648?(t+=4294967296,e.push(210,t>>>24,t>>16&255,t>>8&255,255&t)):(p=Math.floor(t/4294967296),i=4294967295&t,e.push(211,p>>24&255,p>>16&255,p>>8&255,255&p,i>>24&255,i>>16&255,i>>8&255,255&i)):128>t?e.push(t):256>t?e.push(204,t):65536>t?e.push(205,t>>8,255&t):4294967296>t?e.push(206,t>>>24,t>>16&255,t>>8&255,255&t):(p=Math.floor(t/4294967296),i=4294967295&t,e.push(207,p>>24&255,p>>16&255,p>>8&255,255&p,i>>24&255,i>>16&255,i>>8&255,255&i)):(h=0>t,h&&(t*=-1),f=Math.log(t)/.6931471805599453+1023|0,l=t*Math.pow(2,1075-f),i=4294967295&l,h&&(f|=2048),p=l/4294967296&1048575|f<<20,e.push(203,p>>24&255,p>>16&255,p>>8&255,255&p,i>>24&255,i>>16&255,i>>8&255,255&i));break;case"string":for(o=t.length,c=e.length,e.push(0),a=0;o>a;++a)u=t.charCodeAt(a),128>u?e.push(127&u):2048>u?e.push(u>>>6&31|192,63&u|128):65536>u&&e.push(u>>>12&15|224,u>>>6&63|128,63&u|128);s=e.length-c-1,32>s?e[c]=160+s:256>s?e.splice(c,1,217,s):65536>s?e.splice(c,1,218,s>>8,255&s):4294967296>s&&e.splice(c,1,219,s>>>24,s>>16&255,s>>8&255,255&s);break;default:if(m(t)){s=t.length,256>s?e.push(196,s):65536>s?e.push(197,s>>8,255&s):4294967296>s&&e.push(198,s>>>24,s>>16&255,s>>8&255,255&s),Array.prototype.push.apply(e,t);break}if(++r>=M)return k=1,e=[];if(y(t))for(s=t.length,16>s?e.push(144+s):65536>s?e.push(220,s>>8,255&s):4294967296>s&&e.push(221,s>>>24,s>>16&255,s>>8&255,255&s),a=0;s>a;++a)n(e,t[a],r);else{c=e.length,e.push(0),s=0;for(a in t)++s,n(e,a,r),n(e,t[a],r);16>s?e[c]=128+s:65536>s?e.splice(c,1,222,s>>8,255&s):4294967296>s&&e.splice(c,1,223,s>>>24,s>>16&255,s>>8&255,255&s)}}return e}function s(){var e,t,r,n,o,u,c,p,i,h=0,f=b,l=f[++v];if(l>=224)return l-256;if(192>l){if(128>l)return l;144>l?(h=l-128,l=128):160>l?(h=l-144,l=144):(h=l-160,l=160)}switch(l){case 192:return null;case 194:return!1;case 195:return!0;case 202:return h=16777216*f[++v]+(f[++v]<<16)+(f[++v]<<8)+f[++v],o=2147483648&h,u=h>>23&255,c=8388607&h,h&&2147483648!==h?255===u?c?0/0:1/0:(o?-1:1)*(8388608|c)*Math.pow(2,u-127-23):0;case 203:return h=16777216*f[++v]+(f[++v]<<16)+(f[++v]<<8)+f[++v],o=2147483648&h,u=h>>20&2047,c=1048575&h,h&&2147483648!==h?2047===u?(v+=4,c?0/0:1/0):(h=16777216*f[++v]+(f[++v]<<16)+(f[++v]<<8)+f[++v],(o?-1:1)*((1048576|c)*Math.pow(2,u-1023-20)+h*Math.pow(2,u-1023-52))):(v+=4,0);case 207:return h=16777216*f[++v]+(f[++v]<<16)+(f[++v]<<8)+f[++v],4294967296*h+16777216*f[++v]+(f[++v]<<16)+(f[++v]<<8)+f[++v];case 206:h+=16777216*f[++v]+(f[++v]<<16);case 205:h+=f[++v]<<8;case 204:return h+f[++v];case 211:return h=f[++v],128&h?-1*(72057594037927940*(255^h)+281474976710656*(255^f[++v])+1099511627776*(255^f[++v])+4294967296*(255^f[++v])+16777216*(255^f[++v])+65536*(255^f[++v])+256*(255^f[++v])+(255^f[++v])+1):72057594037927940*h+281474976710656*f[++v]+1099511627776*f[++v]+4294967296*f[++v]+16777216*f[++v]+65536*f[++v]+256*f[++v]+f[++v];case 210:return h=16777216*f[++v]+(f[++v]<<16)+(f[++v]<<8)+f[++v],2147483648>h?h:h-4294967296;case 209:return h=(f[++v]<<8)+f[++v],32768>h?h:h-65536;case 208:return h=f[++v],128>h?h:h-256;case 219:h+=16777216*f[++v]+(f[++v]<<16);case 218:h+=f[++v]<<8;case 217:h+=f[++v];case 160:for(p=[],t=v,r=t+h;r>t;)n=f[++t],p.push(128>n?n:224>n?(31&n)<<6|63&f[++t]:(15&n)<<12|(63&f[++t])<<6|63&f[++t]);return v=t,p.length<10240?w.apply(null,p):a(p);case 198:h+=16777216*f[++v]+(f[++v]<<16);case 197:h+=f[++v]<<8;case 196:h+=f[++v];var d=++v+h,g=f.slice(v,d);return v+=h,g;case 223:h+=16777216*f[++v]+(f[++v]<<16);case 222:h+=(f[++v]<<8)+f[++v];case 128:for(i={};h--;){for(e=f[++v]-160,p=[],t=v,r=t+e;r>t;)n=f[++t],p.push(128>n?n:224>n?(31&n)<<6|63&f[++t]:(15&n)<<12|(63&f[++t])<<6|63&f[++t]);v=t,i[w.apply(null,p)]=s()}return i;case 221:h+=16777216*f[++v]+(f[++v]<<16);case 220:h+=(f[++v]<<8)+f[++v];case 144:for(p=[];h--;)p.push(s());return p}}function a(e){try{return w.apply(this,e)}catch(t){}for(var r=[],n=0,s=e.length,a=d;s>n;++n)r[n]=a[e[n]];return r.join("")}function o(e,t,r){t.method="GET",t.binary=!0,c(e,t,r)}function u(r,n,s){if(n.method="PUT",n.binary=!0,n.worker&&e.Worker){var a=new Worker(msgpack.worker);a.onmessage=function(e){n.data=e.data,c(r,n,s)},a.postMessage({method:"pack",data:n.data})}else n.data=h(t(n.data)),c(r,n,s)}function c(t,n,s){function a(){if(4===k.readyState){var t,a,o,c=k.status,h={status:c,ok:c>=200&&300>c};if(!y++){if("PUT"===l)t=h.ok?k.responseText:"";else if(h.ok){if(n.worker&&e.Worker)return a=new Worker(msgpack.worker),a.onmessage=function(e){s(e.data,n,h)},a.postMessage({method:"unpack",data:k.responseText}),void u();o=f?i(k):p(k.responseText),t=r(o)}b&&b(k,n,h),s(t,n,h),u()}}}function o(e,t){if(!y++){var r={status:t||400,ok:!1};b&&b(k,n,r),s(null,n,r),u(e)}}function u(t){t&&k&&k.abort&&k.abort(),h&&(clearTimeout(h),h=0),k=null,e.addEventListener&&e.removeEventListener("beforeunload",o,!1)}var c,h=0,l=n.method||"GET",d=n.header||{},g=n.before,b=n.after,v=n.data||null,k=e.XMLHttpRequest?new XMLHttpRequest:e.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null,y=0,m="overrideMimeType",w="setRequestHeader",M="GET"===l&&n.binary;try{k.onreadystatechange=a,k.open(l,t,!0),g&&g(k,n),M&&k[m]&&k[m]("text/plain; charset=x-user-defined"),v&&k[w]("Content-Type","application/x-www-form-urlencoded");for(c in d)k[w](c,d[c]);e.addEventListener&&e.addEventListener("beforeunload",o,!1),k.send(v),h=setTimeout(function(){o(1,408)},1e3*(n.timeout||10))}catch(T){o(0,400)}}function p(e){var t,r,n=[],s=l,a=e.split(""),o=-1;for(r=a.length,t=r%8;t--;)++o,n[o]=s[a[o]];for(t=r>>3;t--;)n.push(s[a[++o]],s[a[++o]],s[a[++o]],s[a[++o]],s[a[++o]],s[a[++o]],s[a[++o]],s[a[++o]]);return n}function i(e){var t,r,n,s,a,o,u,c,p,i,h,f,l=[],d="charCodeAt",g=-1;for(f=vblen(e),t=vbstr(e),n=Math.ceil(f/2),r=n%8;r--;)s=t[d](++g),l.push(255&s,s>>8);for(r=n>>3;r--;)s=t[d](++g),a=t[d](++g),o=t[d](++g),u=t[d](++g),c=t[d](++g),p=t[d](++g),i=t[d](++g),h=t[d](++g),l.push(255&s,s>>8,255&a,a>>8,255&o,o>>8,255&u,u>>8,255&c,c>>8,255&p,p>>8,255&i,i>>8,255&h,h>>8);return f%2&&l.pop(),l}function h(t){var r=[],n=0,s=-1,a=t.length,o=[0,2,1][t.length%3],u=d,c=g;if(e.btoa){for(;a>s;)r.push(u[t[++s]]);return btoa(r.join(""))}for(--a;a>s;)n=t[++s]<<16|t[++s]<<8|t[++s],r.push(c[n>>18&63],c[n>>12&63],c[n>>6&63],c[63&n]);return o>1&&(r[r.length-2]="="),o>0&&(r[r.length-1]="="),r.join("")}e.msgpack={pack:t,unpack:r,worker:"msgpack.js",upload:u,download:o};var f=/MSIE/.test(navigator.userAgent),l={},d={},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),b=[],v=0,k=0,y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},m=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},w=String.fromCharCode,M=512;self.importScripts&&(onmessage=function(e){"pack"===e.data.method?postMessage(h(t(e.data.data))):postMessage(r(e.data.data))}),function(){for(var e,t=0;256>t;++t)e=w(t),l[e]=t,d[t]=e;for(t=128;256>t;++t)l[w(63232+t)]=t}(),f&&document.write('<script type="text/vbscript">Function vblen(b)vblen=LenB(b.responseBody)End Function\nFunction vbstr(b)vbstr=CStr(b.responseBody)+chr(0)End Function</script>')}(this);